<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Container Solutions - Code Generator</title>
    <link rel="stylesheet" href="static/css/prism.css">
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #1e40af;
            --accent: #3b82f6;
            --background: #f8fafc;
            --surface: #ffffff;
            --text: #1e293b;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--background);
            color: var(--text);
            line-height: 1.6;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 3rem 2rem;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .card {
            background: var(--surface);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
        }
        
        .card-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .card-header h2 {
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        .language-badge {
            background: var(--accent);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .code-section {
            margin: 1.5rem 0;
        }
        
        .code-section h3 {
            color: var(--text);
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }
        
        pre[class*="language-"] {
            border-radius: 8px;
            border: 1px solid #cbd5e1;
        }
        
        .actions {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--secondary);
        }
        
        .btn-secondary {
            background: #f1f5f9;
            color: var(--text);
            border: 1px solid #cbd5e1;
        }
        
        .btn-secondary:hover {
            background: #e2e8f0;
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .feature {
            text-align: center;
            padding: 1.5rem;
        }
        
        .feature-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
        }
        
        .feature h3 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>üöÄ Container Solutions Pro</h1>
            <p>Enterprise-grade container configuration and deployment code</p>
        </div>
    </div>

    <div class="container">
        <!-- Features Overview -->
        <div class="features-grid">
            <div class="feature">
                <div class="feature-icon">üê≥</div>
                <h3>Docker Ready</h3>
                <p>Optimized Docker configurations</p>
            </div>
            <div class="feature">
                <div class="feature-icon">‚ò∏Ô∏è</div>
                <h3>Kubernetes</h3>
                <p>Production K8s manifests</p>
            </div>
            <div class="feature">
                <div class="feature-icon">‚ö°</div>
                <h3>Automation</h3>
                <p>Deployment scripts & CI/CD</p>
            </div>
            <div class="feature">
                <div class="feature-icon">üîí</div>
                <h3>Security</h3>
                <p>Best practices built-in</p>
            </div>
        </div>

        <!-- Docker Configurations -->
        <div class="card">
            <div class="card-header">
                <h2>Docker Environment</h2>
                <span class="language-badge">Production Ready</span>
            </div>
            
            <div class="code-section">
                <h3>Multi-stage Dockerfile</h3>
                <pre><code class="language-dockerfile">
# Build stage
FROM node:18-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

# Runtime stage
FROM node:18-alpine AS runtime
WORKDIR /app
RUN addgroup -g 1001 -S nodejs
RUN adduser -S nextjs -u 1001
COPY --from=builder --chown=nextjs:nodejs /app/node_modules ./node_modules
COPY --chown=nextjs:nodejs . .

USER nextjs
EXPOSE 3000
ENV NODE_ENV production

CMD ["node", "server.js"]
                </code></pre>
                <div class="actions">
                    <button class="btn btn-primary" onclick="copyCode(this)">Copy Code</button>
                    <button class="btn btn-secondary" onclick="downloadCode('Dockerfile', this)">Download</button>
                </div>
            </div>

            <div class="code-section">
                <h3>Docker Compose Stack</h3>
                <pre><code class="language-yaml">
version: '3.8'

services:
  app:
    build: 
      context: .
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    environment:
      - DATABASE_URL=postgresql://user:pass@db:5432/myapp
      - REDIS_URL=redis://redis:6379
      - NODE_ENV=production
    depends_on:
      - db
      - redis
    networks:
      - app-network

  db:
    image: postgres:15-alpine
    environment:
      POSTGRES_DB: myapp
      POSTGRES_USER: user
      POSTGRES_PASSWORD: pass
    volumes:
      - db_data:/var/lib/postgresql/data
    networks:
      - app-network

  redis:
    image: redis:7-alpine
    command: redis-server --appendonly yes
    volumes:
      - redis_data:/data
    networks:
      - app-network

volumes:
  db_data:
  redis_data:

networks:
  app-network:
    driver: bridge
                </code></pre>
                <div class="actions">
                    <button class="btn btn-primary" onclick="copyCode(this)">Copy Code</button>
                    <button class="btn btn-secondary" onclick="downloadCode('docker-compose.yml', this)">Download</button>
                </div>
            </div>
        </div>

        <!-- Kubernetes Manifests -->
        <div class="card">
            <div class="card-header">
                <h2>Kubernetes Deployment</h2>
                <span class="language-badge">Enterprise Grade</span>
            </div>
            
            <div class="code-section">
                <h3>Web Application Deployment</h3>
                <pre><code class="language-yaml">
apiVersion: apps/v1
kind: Deployment
metadata:
  name: web-app
  namespace: production
  labels:
    app: web
    version: v1.0.0
spec:
  replicas: 3
  selector:
    matchLabels:
      app: web
  template:
    metadata:
      labels:
        app: web
      annotations:
        prometheus.io/scrape: "true"
        prometheus.io/port: "3000"
    spec:
      containers:
      - name: web
        image: my-registry/app:latest
        imagePullPolicy: IfNotPresent
        ports:
        - containerPort: 3000
        env:
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              name: app-secrets
              key: database-url
        - name: REDIS_URL
          valueFrom:
            secretKeyRef:
              name: app-secrets
              key: redis-url
        resources:
          requests:
            memory: "128Mi"
            cpu: "100m"
          limits:
            memory: "256Mi"
            cpu: "200m"
        livenessProbe:
          httpGet:
            path: /health
            port: 3000
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /ready
            port: 3000
          initialDelaySeconds: 5
          periodSeconds: 5
        securityContext:
          runAsNonRoot: true
          runAsUser: 1000
          allowPrivilegeEscalation: false
                </code></pre>
                <div class="actions">
                    <button class="btn btn-primary" onclick="copyCode(this)">Copy Code</button>
                    <button class="btn btn-secondary" onclick="downloadCode('deployment.yaml', this)">Download</button>
                </div>
            </div>

            <div class="code-section">
                <h3>Service & Ingress Configuration</h3>
                <pre><code class="language-yaml">
apiVersion: v1
kind: Service
metadata:
  name: web-service
  namespace: production
spec:
  selector:
    app: web
  ports:
    - name: http
      protocol: TCP
      port: 80
      targetPort: 3000
  type: ClusterIP

---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: web-ingress
  namespace: production
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
    cert-manager.io/cluster-issuer: "letsencrypt-prod"
spec:
  tls:
  - hosts:
    - app.company.com
    secretName: app-tls
  rules:
  - host: app.company.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: web-service
            port:
              number: 80
                </code></pre>
                <div class="actions">
                    <button class="btn btn-primary" onclick="copyCode(this)">Copy Code</button>
                    <button class="btn btn-secondary" onclick="downloadCode('service-ingress.yaml', this)">Download</button>
                </div>
            </div>
        </div>

        <!-- Automation Scripts -->
        <div class="card">
            <div class="card-header">
                <h2>Automation & CI/CD</h2>
                <span class="language-badge">Bash/PowerShell</span>
            </div>
            
            <div class="code-section">
                <h3>Container Build & Deployment</h3>
                <pre><code class="language-bash">
#!/bin/bash

# Container deployment automation script
set -euo pipefail

# Configuration
APP_NAME="myapp"
REGISTRY="my-registry.com"
BUILD_NUMBER="${BUILD_NUMBER:-1}"
ENVIRONMENT="${1:-staging}"

echo "üöÄ Starting deployment to $ENVIRONMENT environment..."

# Validate environment
case $ENVIRONMENT in
    staging|production) ;;
    *) echo "‚ùå Invalid environment: $ENVIRONMENT"; exit 1 ;;
esac

# Build and tag container
echo "üì¶ Building container image..."
docker build \
    --tag $REGISTRY/$APP_NAME:latest \
    --tag $REGISTRY/$APP_NAME:$BUILD_NUMBER \
    --file Dockerfile .

# Security scan
echo "üîí Scanning for vulnerabilities..."
docker scan $REGISTRY/$APP_NAME:latest

# Push to registry
echo "üì§ Pushing to container registry..."
docker push $REGISTRY/$APP_NAME:latest
docker push $REGISTRY/$APP_NAME:$BUILD_NUMBER

# Deploy to Kubernetes
echo "‚öôÔ∏è  Deploying to Kubernetes..."
kubectl set image deployment/$APP_NAME $APP_NAME=$REGISTRY/$APP_NAME:$BUILD_NUMBER -n $ENVIRONMENT

# Wait for rollout
echo "‚è≥ Waiting for deployment to complete..."
kubectl rollout status deployment/$APP_NAME -n $ENVIRONMENT --timeout=300s

# Run smoke tests
echo "üß™ Running smoke tests..."
./scripts/smoke-test.sh $ENVIRONMENT

echo "‚úÖ Deployment to $ENVIRONMENT completed successfully!"
                </code></pre>
                <div class="actions">
                    <button class="btn btn-primary" onclick="copyCode(this)">Copy Code</button>
                    <button class="btn btn-secondary" onclick="downloadCode('deploy.sh', this)">Download</button>
                </div>
            </div>

            <div class="code-section">
                <h3>Infrastructure Monitoring</h3>
                <pre><code class="language-bash">
#!/bin/bash

# Container infrastructure monitoring
set -euo pipefail

echo "üìä Container Infrastructure Status"
echo "=================================="

# Docker status
echo -e "\nüê≥ Docker Containers:"
docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}\t{{.RunningFor}}"

# Resource usage
echo -e "\nüíæ Resource Usage:"
docker stats --no-stream --format "table {{.Name}}\t{{.CPUPerc}}\t{{.MemUsage}}\t{{.MemPerc}}"

# Kubernetes status
if command -v kubectl &> /dev/null; then
    echo -e "\n‚ò∏Ô∏è  Kubernetes Status:"
    kubectl get nodes -o wide
    echo -e "\nüì¶ Pods:"
    kubectl get pods --all-namespaces --field-selector=status.phase=Running
    echo -e "\nüîß Deployments:"
    kubectl get deployments --all-namespaces
fi

# System resources
echo -e "\nüñ•Ô∏è  System Resources:"
echo "CPU: $(grep 'cpu ' /proc/stat | awk '{usage=($2+$4)*100/($2+$4+$5)} END {print usage "%"}')"
echo "Memory: $(free -m | awk 'NR==2{printf "%.2f%%", $3*100/$2}')"
echo "Disk: $(df -h / | awk 'NR==2{print $5}')"

echo -e "\n‚úÖ Health check completed at $(date)"
                </code></pre>
                <div class="actions">
                    <button class="btn btn-primary" onclick="copyCode(this)">Copy Code</button>
                    <button class="btn btn-secondary" onclick="downloadCode('monitor.sh', this)">Download</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Load PrismJS -->
    <script src="static/js/prism.js"></script>
    
    <!-- Enhanced Language Definitions -->
    <script>
        // Add Dockerfile syntax
        Prism.languages.dockerfile = {
            'comment': {
                pattern: /#.*/,
                greedy: true
            },
            'string': {
                pattern: /(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,
                greedy: true
            },
            'keyword': {
                pattern: /(FROM|RUN|CMD|LABEL|EXPOSE|ENV|ADD|COPY|ENTRYPOINT|VOLUME|USER|WORKDIR|ARG|ONBUILD|STOPSIGNAL|HEALTHCHECK|SHELL)\b/,
                lookbehind: true,
                greedy: true
            },
            'function': /\b(?:MAINTAINER)\b/,
            'number': /\b\d+\b/,
            'operator': /\\/
        };

        // Add YAML syntax
        Prism.languages.yaml = {
            'scalar': {
                pattern: /([\-:]\s*(?:![^\s]+)?[ \t]*)[|>](?:[+-])?[ \t]*(?:(?:\r?\n|\r)[ \t]+.+)*/,
                lookbehind: true,
                alias: 'string'
            },
            'comment': /#.*/,
            'key': {
                pattern: /(\s*(?:^|[:\-,[{\r\n?])[ \t]*(?:![^\s]+)?[ \t]*)[^\r\n{[\]},#\s]+?(?=\s*:\s)/,
                lookbehind: true,
                alias: 'atrule'
            },
            'directive': {
                pattern: /(^[ \t]*)%.+/m,
                lookbehind: true,
                alias: 'important'
            },
            'datetime': {
                pattern: /([:\-,[{]\s*(?:![^\s]+)?[ \t]*)(?:\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?)?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?)(?=[ \t]*(?:$|,|]|}))/m,
                lookbehind: true,
                alias: 'number'
            },
            'boolean': {
                pattern: /([:\-,[{]\s*(?:![^\s]+)?[ \t]*)(?:true|false)[ \t]*(?=$|,|]|})/im,
                lookbehind: true,
                alias: 'important'
            },
            'null': {
                pattern: /([:\-,[{]\s*(?:![^\s]+)?[ \t]*)(?:null|~)[ \t]*(?=$|,|]|})/im,
                lookbehind: true,
                alias: 'important'
            },
            'string': {
                pattern: /([:\-,[{]\s*(?:![^\s]+)?[ \t]*)("|')(?:(?!\2)[^\\\r\n]|\\.)*\2(?=[ \t]*(?:$|,|]|}))/m,
                lookbehind: true,
                greedy: true
            },
            'number': {
                pattern: /([:\-,[{]\s*(?:![^\s]+)?[ \t]*)[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+\.?\d*|\.?\d+)(?:e[+-]?\d+)?|\.inf|\.nan)[ \t]*(?=$|,|]|})/im,
                lookbehind: true
            },
            'tag': /![^\s]+/,
            'important': /[&*][\w]+/,
            'punctuation': /---|[:[\]{}\-,|>?]|\.\.\./
        };

        // Add Bash syntax
        Prism.languages.bash = {
            'comment': [
                {
                    pattern: /(^|[^"{\\$])#.*/,
                    lookbehind: true
                },
                {
                    pattern: /^#!.+/,
                    greedy: true
                }
            ],
            'string': {
                pattern: /(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,
                greedy: true
            },
            'variable': /\$(?:\w+|[?$!@#*_-])/,
            'function': /\b(?:echo|printf|cd|pwd|ls|cat|grep|find|docker|kubectl|set|export)\b/,
            'keyword': /\b(?:if|then|else|elif|fi|for|while|do|done|case|esac|function)\b/,
            'builtin': /\b(?:true|false|exit|return)\b/,
            'number': /\b\d+\b/,
            'operator': /&&|\|\||[=!<>]=?|[-+*/%]|\.{3}/
        };
    </script>

    <!-- Utility Functions -->
    <script>
        // Copy code to clipboard
        function copyCode(button) {
            const pre = button.closest('.code-section').querySelector('pre');
            const code = pre.textContent;
            
            navigator.clipboard.writeText(code).then(() => {
                const originalText = button.textContent;
                button.textContent = '‚úÖ Copied!';
                button.style.background = '#10b981';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
                button.textContent = '‚ùå Failed';
                button.style.background = '#ef4444';
            });
        }

        // Download code as file
        function downloadCode(filename, button) {
            const pre = button.closest('.code-section').querySelector('pre');
            const code = pre.textContent;
            const blob = new Blob([code], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            const originalText = button.textContent;
            button.textContent = '‚úÖ Downloaded!';
            button.style.background = '#10b981';
            
            setTimeout(() => {
                button.textContent = originalText;
                button.style.background = '';
            }, 2000);
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            if (window.Prism) {
                Prism.highlightAll();
                console.log('üöÄ Container project syntax highlighting initialized!');
            }
        });
    </script>
</body>
</html>
